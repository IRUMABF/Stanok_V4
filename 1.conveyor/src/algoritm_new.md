
1. видача фарби, цей цикл починається коли партія баночок доїхали до датчика 1 на конвеєрі, після спрацювання датчика баночка доїжає ще задану відстань(дотяжка) щоб вона встала рівно під соплом, довжина дотяжки вказана в config.h параметром JAR_CENTERING_MM. В нас завжди їде по конверєру банки партіями по 6шт ,розливати лишень першу баночку і тоді 5 наступних ігнорувати. А і самі дії для керування механізмом розливання(коли баночка уже під соплом): забір і видача фарби поршнем(відкриванння на заданий час розподілювача №3, по завершеню часу закриття, час вказується в config.h параметром PAINT_PISTON_HOLD_TIME) також добав настроювану невелику затримку (50мс) після розливання перед відновленням руху конвеєра.
3. закриття кришок, отже цикл закривання кришок баночок відбуваєтья по спрацюванню датчика 2, він знаходиться вкінці зони закривання, як тільки спрацював датчик він відразу зупиняє конвеєр, і відпрацьовується цикл закривання як описано далі, після чого відновлюється рух конвеєра ігноруючи 5 наступних спрацювань датчика 2, так як баночок ми закриваєм по 6 шт зараз а спрацювання в нас відбувається по першій.
	1. Завертання кришок баночок перед закриванням, (відкривання і утримання в такому положені розподілювача №4, тут має бути затримка перед запуском Valve 5 після Valve 4 вона вказується в config.h параметром STEP_PAUSE_CAP_SCREW_MS)
	2. Закривання кришок баночок ( відкривання на заданий час розподілювача №5 в config.h параметром CLOSE_CAP_HOLD_TIME, по закінченню часу вертання в закритий стан і перехід до наступного пункту з мінімальною паузою після Valve 5 яка вказана в config.h параметром STEP_PAUSE_CAP_CLOSE_MS)
    3. Завертання кришок убрати (закривання розподілювача №4 )
це все працює в циклі тобто поки станок працює через нього може проїжати безліч партій баночок.
також треба видавати сигнал для інших механізмів станка:
1. сигнал запущеного станка поки станок стоїть на паузі або коли він був зупинений кнопкою стоп то сигнал низький, як тіки ми нажали кнопку старт і поки станок в робочому реежимі ми на піні тримаєм високий рівень сигналу, пін вказаний в в pinout.h як START_STOP_PIN
2. сигнал активного конвеєра, коли станок працює і конвеєр рухається на даний пін подається високий рівень, відповідно коли конвеєр призупиняється по датчиках для розливу фарби або закривання баночок, або ж натискається кнопка стоп так як конвеєр не рухається то на піні сигнал низького рівня, пін вказаний в в pinout.h як START_CONVEYOR_PIN.

Особливості які треба враховувати:
1. конвеєр, датчики, кнопки мають працювати і чітко реагувати паралельно до роботи всіх таймерів і затрмок що керують пневматикою. Тобто в коді немає бути жодного delay.
2. реалізованаі кнопки пуск і стоп, запускає і зупиняє весь станок, заморожує грубо кажучи роботу, таймери завмирають в тому положені коли нажалась кнопка для  зупинки і з того ж моменку відновлюють роботу коли ще раз нажали для відновлення роботи, це все для того щоб не збилися ніякі таймнги. Кнопки прописані в pinout.h як stop_PIN, start_PIN .

для спрощення роботи вже в проекті є бібліотеки по опитуванню датчиків кнопок, роботи з конвеєром і пневмоклапанами, можеш їх використовувати.
Відладку в монітор порту не створювати.
Писати зрозумілий і максимально читаємий код.



